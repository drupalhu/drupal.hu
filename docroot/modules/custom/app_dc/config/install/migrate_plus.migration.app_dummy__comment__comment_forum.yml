langcode: en
status: true
id: app_dummy__comment__comment_forum
label: 'App - Dummy - comment - comment_forum'

migration_tags:
  - app
  - dummy_content

migration_group: app_dummy

migration_dependencies:
  required:
    - app_dummy__user

source:
  fileName: comment/comment_forum.yml
  identifier: id

  fields:
    uuid: UUID
    entity_type: Entity type
    entity_id: Entity identifier
    field_name: Field name
    #cid: Identifier
    #comment_type: Comment type
    pid: Parent comment identifier
    #thread:
    status: Status
    created: Created
    changed: Changed
    langcode: Language code
    uid: Author reference
    name: Author's name
    mail: Author's mail
    homepage: Author's homepage
    subject: Subject
    comment_body: Body

process:
  uuid: uuid
  entity_type:
    source: entity_type
    plugin: default_value
    default_value: node
  entity_id:
    source: entity_id
    plugin: migration_lookup
    migration:
      - app_dummy__node
  field_name:
    source: field_name
    plugin: default_value
    default_value: comment_forum
  # cid: It is what it is. No need to migrate.
  comment_type:
    source: comment_type
    plugin: default_value
    default_value: comment_forum
  pid:
    -
      source: pid
      plugin: skip_on_empty
      method: process
    -
      plugin: migration_lookup
      migration: app_dummy__comment__comment_forum
  # thread: Hopefully this will be automatically populated.
  status:
    source: status
    plugin: default_value
    default_value: true
    strict: true
  created:
    -
      source: created
      plugin: default_value
      default_value: now
    -
      plugin: migrate_dc_str_to_time
      output_format: U
  changed:
    -
      source: changed
      plugin: default_value
      default_value: now
    -
      plugin: migrate_dc_str_to_time
      output_format: U
  langcode:
    source: langcode
    plugin: default_value
    default_value: hu
  uid:
    -
      source: uid
      plugin: skip_on_empty
      method: process
    -
      plugin: migration_lookup
      migration: app_dummy__user
  name: name
  mail: mail
  homepage: homepage
  subject: subject
  comment_body:
    source: comment_body
    plugin: sub_process
    process:
      value: value
      format:
        source: format
        plugin: default_value
        default_value: html_body

destination:
  plugin: 'entity:comment'
  default_bundle: 'comment_forum'
  overwrite_properties:
    - entity_type
    - entity_id
    - pid
    - status
    - created
    - changed
    - langcode
    - uid
    - name
    - mail
    - homepage
    - subject
    - comment_body
